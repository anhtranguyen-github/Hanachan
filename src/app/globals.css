@import "tailwindcss";

@theme {
  /* Typography Scale - Modular (1.250 ratio) */
  --font-size-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.8125rem);
  --font-size-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
  --font-size-base: clamp(1rem, 0.95rem + 0.5vw, 1.125rem);
  --font-size-lg: clamp(1.25rem, 1.15rem + 0.625vw, 1.5rem);
  --font-size-xl: clamp(1.5rem, 1.35rem + 1.25vw, 2rem);
  --font-size-2xl: clamp(2rem, 1.75rem + 1.25vw, 2.5rem);
  --font-size-3xl: clamp(2.5rem, 2rem + 1.875vw, 3.5rem);

  /* Spacing System - 8pt Grid */
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-5: 1.25rem;
  --spacing-6: 1.5rem;
  --spacing-8: 2rem;
  --spacing-10: 2.5rem;
  --spacing-12: 3rem;
  --spacing-16: 4rem;

  --font-nunito: var(--font-nunito), sans-serif;
  --font-fredoka: var(--font-fredoka), sans-serif;

  /* BRAND & INTERACTION */
  --color-sakura-ink: #1C1C1C;
  --color-sakura-cocoa: #4A3728;
  --color-sakura-rose: #5D2E37;
  --color-sakura-divider: #F5E9ED;
  --color-sakura-bg-app: #FFFAFB;

  /* MISSING UTILITIES FIX */
  --color-card: #FFFFFF;
  --color-border: #F5E9ED;
  --color-muted-foreground: #6B7280;
  --color-ring: #4A3728;

  /* SEMANTIC (SOUL) */
  --color-content-emerald: #059669;
  --color-content-amber: #D97706;
  --color-content-teal: #0D9488;
  --color-content-blue: #2563EB;

  /* STATE (SHELL) */
  --color-shell-indigo: #4F46E5;
  --color-shell-cyan: #06B6D4;
  --color-shell-amber: #F59E0B;
  --color-shell-purple: #8B5CF6;
  --color-shell-gray: #D1D5DB;

  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  --radius-3xl: 2rem;
  --radius-clay: 24px;
}

@layer base {
  * {
    @apply border-sakura-divider;
  }

  body {
    @apply text-sakura-ink;
    background-color: var(--color-sakura-bg-app);
    font-family: var(--font-nunito);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-fredoka tracking-tight font-black text-sakura-ink uppercase;
  }
}

@layer utilities {
  .flat-card {
    @apply bg-card rounded-2xl border border-sakura-divider transition-all duration-200;
    box-shadow: none !important;
  }

  .sakura-border {
    @apply border border-sakura-divider;
  }

  .sakura-divider {
    @apply border-b border-sakura-divider;
  }

  /* Mobile-first Responsive Utilities */
  .touch-action-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .min-h-dvh {
    min-height: 100dvh;
  }

  .h-dvh {
    height: 100dvh;
  }

  /* Safe area insets for notched devices */
  .safe-inset-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Overscroll behavior for modals */
  .overscroll-contain {
    overscroll-behavior: contain;
  }

  /* Focus ring utility */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sakura-cocoa focus-visible:ring-offset-2;
  }

  /* Texture Overlay Utility */
  .sakura-texture-overlay {
    background-image: url('/japanese_zen_garden_sand.png');
    background-repeat: repeat;
    opacity: 0.05;
    pointer-events: none;
  }

  /* ========================================
     CONTENT TYPE DESIGN SYSTEM
     Each content type has its own color scheme
     ======================================== */

  /* Radical - Sakura Pink */
  .content-radical {
    background-color: #FFF0F4;
    color: #9B4D5C;
    border-color: #F5D5DC;
  }

  .content-radical-badge {
    background-color: #F2A7B1;
    color: #4A3728;
  }

  /* Kanji - Soft Teal */
  .content-kanji {
    background-color: #E8F6F4;
    color: #3D7A70;
    border-color: #C5E5E0;
  }

  .content-kanji-badge {
    background-color: #9BCBC3;
    color: #1F3E39;
  }

  /* Vocabulary - Soft Blue */
  .content-vocabulary {
    background-color: #EDF2FB;
    color: #4A6295;
    border-color: #D0DCF0;
  }

  .content-vocabulary-badge {
    background-color: #AFC1E8;
    color: #263450;
  }

  /* Grammar - Soft Yellow */
  .content-grammar {
    background-color: #FDF6E9;
    color: #8D6A2F;
    border-color: #F0DFC0;
  }

  .content-grammar-badge {
    background-color: #F3C98B;
    color: #4B3819;
  }

  /* ========================================
     LEARNING STATE DESIGN SYSTEM
     Each state has distinct visual treatment
     ======================================== */

  /* New - Fresh Blue */
  .state-new {
    background-color: #EDF3FF;
    color: #3D5A8F;
    border-color: #C5D5F0;
  }

  .state-new-badge {
    background-color: #94B9FF;
    color: #263450;
  }

  /* Learning - Warm Yellow */
  .state-learning {
    background-color: #FFF8E6;
    color: #8D6A2F;
    border-color: #F0E0C0;
  }

  .state-learning-badge {
    background-color: #FFD08A;
    color: #5A4A3A;
  }

  /* Review - Soft Purple */
  .state-review {
    background-color: #F3F0FF;
    color: #5A4A8F;
    border-color: #D0C5F0;
  }

  .state-review-badge {
    background-color: #B19DFF;
    color: #261F4D;
  }

  /* Mastered - Fresh Green */
  .state-mastered {
    background-color: #EBF7EF;
    color: #3D6B4A;
    border-color: #C5E5D0;
  }

  .state-mastered-badge {
    background-color: #97C8A9;
    color: #1F3E29;
  }

  /* Burned - Warm Red */
  .state-burned {
    background-color: #FFF0F0;
    color: #8F3D3D;
    border-color: #F0C5C5;
  }

  .state-burned-badge {
    background-color: #FF9A9E;
    color: #4D1F1F;
  }

  /* ========================================
     NO SHADOW POLICY
     Remove all shadows across the app
     ======================================== */
  .no-shadow,
  .shadow-none {
    box-shadow: none !important;
  }
}

/* Scrollbar styling - Modern & Subtle */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-muted-foreground/20 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-muted-foreground/40;
}

/* Base Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Chat UI Animations */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes messageAppear {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slideInRight {
  animation: slideInRight 0.3s ease-out forwards;
}

.animate-slideInLeft {
  animation: slideInLeft 0.3s ease-out forwards;
}

.animate-messageAppear {
  animation: messageAppear 0.25s ease-out forwards;
}

/* Chat sidebar transitions */
.chat-sidebar-transition {
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 0.2s ease-out;
}

/* Smooth content fade for sidebar state changes */
.sidebar-content-fade {
  transition: opacity 0.2s ease-out;
}

/* Artifact card hover effect */
.artifact-card {
  transition: transform 0.2s ease-out,
    box-shadow 0.2s ease-out,
    border-color 0.2s ease-out;
}

.artifact-card:hover {
  transform: translateY(-2px);
}

/* Message bubble animations */
.message-bubble {
  animation: messageAppear 0.25s ease-out forwards;
}

/* Loading dots animation improvement */
@keyframes bounceDot {

  0%,
  80%,
  100% {
    transform: translateY(0);
  }

  40% {
    transform: translateY(-6px);
  }
}

.loading-dot {
  animation: bounceDot 1.4s ease-in-out infinite;
}

/* Floating Animation */
@keyframes float {
  0% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-20px);
  }

  100% {
    transform: translateY(0px);
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Spring Transition */
.ease-spring {
  transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
}